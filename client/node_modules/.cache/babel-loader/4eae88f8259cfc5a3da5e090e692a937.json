{"ast":null,"code":"import axios from 'axios';\nexport const setUser = user => {\n  return {\n    type: 'SET_USER',\n    payload: user\n  };\n};\nexport const startLogin = (formData, redirect) => {\n  return dispatch => {\n    axios.post('http://localhost:3040/users/login', formData).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        alert(response.data.error);\n      } else {\n        alert('successfully logged in');\n        console.log(response.data);\n        localStorage.setItem('authToken', response.data);\n        console.log(response.data);\n        axios.get('http://localhost:3040/users/account', {\n          headers: {\n            'x-auth': localStorage.getItem('authToken')\n          }\n        }).then(response => {\n          const user = response.data;\n          console.log(user);\n          dispatch(setUser(user));\n          redirect();\n        }).catch(err => {\n          alert(err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const startGetUser = () => {\n  return dispatch => {\n    axios.get('/users/account', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(response => {\n      const user = response.data;\n      dispatch(setUser(user));\n    }).catch(err => {\n      alert(err);\n    });\n  };\n};\nexport const startRegister = (formData, redirect) => {\n  return dispatch => {\n    axios.post('http://localhost:3040/users/register', formData).then(response => {\n      if (response.data.hasOwnProperty('errors')) {\n        alert(response.data.message);\n      } else {\n        alert('you have succefully registered');\n        redirect();\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const startLogout = () => {\n  return dispatch => {\n    axios.delete('http://localhost:3033/users/logout', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(response => {\n      if (response.data.notice) {\n        alert(response.data.notice);\n        localStorage.removeItem('authToken');\n        dispatch(setUser({}));\n        window.location.href = \"/\";\n      }\n    });\n  };\n};","map":{"version":3,"sources":["H:/ReceipeApp/client/src/actions/register.js"],"names":["axios","setUser","user","type","payload","startLogin","formData","redirect","dispatch","post","then","response","data","hasOwnProperty","alert","error","console","log","localStorage","setItem","get","headers","getItem","catch","err","startGetUser","startRegister","message","startLogout","delete","notice","removeItem","window","location","href"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,OAAO,GAAEC,IAAD,IAAQ;AACzB,SAAM;AAACC,IAAAA,IAAI,EAAC,UAAN;AAAiBC,IAAAA,OAAO,EAACF;AAAzB,GAAN;AACH,CAFM;AAIP,OAAO,MAAMG,UAAU,GAAC,CAACC,QAAD,EAAUC,QAAV,KAAqB;AACzC,SAAOC,QAAD,IAAY;AACdR,IAAAA,KAAK,CAACS,IAAN,CAAW,mCAAX,EAA+CH,QAA/C,EACCI,IADD,CACOC,QAAD,IAAY;AACd,UAAGA,QAAQ,CAACC,IAAT,CAAcC,cAAd,CAA6B,OAA7B,CAAH,EAAyC;AACrCC,QAAAA,KAAK,CAACH,QAAQ,CAACC,IAAT,CAAcG,KAAf,CAAL;AACH,OAFD,MAGI;AACAD,QAAAA,KAAK,CAAC,wBAAD,CAAL;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACC,IAArB;AACNM,QAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAiCR,QAAQ,CAACC,IAA1C;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACC,IAArB;AACAZ,QAAAA,KAAK,CAACoB,GAAN,CAAU,qCAAV,EAAgD;AAE5CC,UAAAA,OAAO,EAAC;AACJ,sBAASH,YAAY,CAACI,OAAb,CAAqB,WAArB;AADL;AAFoC,SAAhD,EAMAZ,IANA,CAMMC,QAAD,IAAY;AACd,gBAAMT,IAAI,GAACS,QAAQ,CAACC,IAApB;AACAI,UAAAA,OAAO,CAACC,GAAR,CAAYf,IAAZ;AACAM,UAAAA,QAAQ,CAACP,OAAO,CAACC,IAAD,CAAR,CAAR;AACAK,UAAAA,QAAQ;AACX,SAXA,EAYAgB,KAZA,CAYOC,GAAD,IAAO;AACVV,UAAAA,KAAK,CAACU,GAAD,CAAL;AACH,SAdA;AAeG;AACJ,KA1BD,EA2BCD,KA3BD,CA2BQC,GAAD,IAAO;AACVR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACH,KA7BD;AA8BH,GA/BD;AAgCH,CAjCM;AAmCP,OAAO,MAAMC,YAAY,GAAC,MAAI;AAC1B,SAAOjB,QAAD,IAAY;AACdR,IAAAA,KAAK,CAACoB,GAAN,CAAU,gBAAV,EAA2B;AACvBC,MAAAA,OAAO,EAAC;AACJ,kBAASH,YAAY,CAACI,OAAb,CAAqB,WAArB;AADL;AADe,KAA3B,EAKCZ,IALD,CAKOC,QAAD,IAAY;AACd,YAAMT,IAAI,GAACS,QAAQ,CAACC,IAApB;AACAJ,MAAAA,QAAQ,CAACP,OAAO,CAACC,IAAD,CAAR,CAAR;AACH,KARD,EASCqB,KATD,CASQC,GAAD,IAAO;AACVV,MAAAA,KAAK,CAACU,GAAD,CAAL;AACH,KAXD;AAYH,GAbD;AAcH,CAfM;AAiBP,OAAO,MAAME,aAAa,GAAC,CAACpB,QAAD,EAAUC,QAAV,KAAqB;AAC5C,SAAOC,QAAD,IAAY;AACfR,IAAAA,KAAK,CAACS,IAAN,CAAW,sCAAX,EAAkDH,QAAlD,EACCI,IADD,CACOC,QAAD,IAAY;AACjB,UAAGA,QAAQ,CAACC,IAAT,CAAcC,cAAd,CAA6B,QAA7B,CAAH,EAA0C;AACtCC,QAAAA,KAAK,CAACH,QAAQ,CAACC,IAAT,CAAce,OAAf,CAAL;AACH,OAFD,MAGI;AACAb,QAAAA,KAAK,CAAC,gCAAD,CAAL;AACAP,QAAAA,QAAQ;AACX;AACD,KATD,EAUCgB,KAVD,CAUQC,GAAD,IAAO;AACVR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACH,KAZD;AAaF,GAdD;AAeH,CAhBM;AAkBP,OAAO,MAAMI,WAAW,GAAC,MAAI;AACzB,SAAOpB,QAAD,IAAY;AACdR,IAAAA,KAAK,CAAC6B,MAAN,CAAa,oCAAb,EAAkD;AAC9CR,MAAAA,OAAO,EAAC;AACJ,kBAASH,YAAY,CAACI,OAAb,CAAqB,WAArB;AADL;AADsC,KAAlD,EAKCZ,IALD,CAKOC,QAAD,IAAY;AACd,UAAGA,QAAQ,CAACC,IAAT,CAAckB,MAAjB,EAAwB;AACpBhB,QAAAA,KAAK,CAACH,QAAQ,CAACC,IAAT,CAAckB,MAAf,CAAL;AACAZ,QAAAA,YAAY,CAACa,UAAb,CAAwB,WAAxB;AACAvB,QAAAA,QAAQ,CAACP,OAAO,CAAC,EAAD,CAAR,CAAR;AACA+B,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,GAArB;AACH;AACJ,KAZD;AAaH,GAdD;AAeH,CAhBM","sourcesContent":["import axios from 'axios'\r\n\r\nexport const setUser=(user)=>{\r\n    return{type:'SET_USER',payload:user}\r\n}\r\n\r\nexport const startLogin=(formData,redirect)=>{\r\n    return(dispatch)=>{\r\n        axios.post('http://localhost:3040/users/login',formData)\r\n        .then((response)=>{\r\n            if(response.data.hasOwnProperty('error')){\r\n                alert(response.data.error)\r\n            }\r\n            else{\r\n                alert('successfully logged in')\r\n                console.log(response.data)\r\n          localStorage.setItem('authToken',response.data)\r\n          console.log(response.data)\r\n          axios.get('http://localhost:3040/users/account',{\r\n             \r\n              headers:{\r\n                  'x-auth':localStorage.getItem('authToken')\r\n              }\r\n          })\r\n         .then((response)=>{\r\n             const user=response.data\r\n             console.log(user)\r\n             dispatch(setUser(user))\r\n             redirect()\r\n         })\r\n         .catch((err)=>{\r\n             alert(err)\r\n         })\r\n            }\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n}\r\n\r\nexport const startGetUser=()=>{\r\n    return(dispatch)=>{\r\n        axios.get('/users/account',{\r\n            headers:{\r\n                'x-auth':localStorage.getItem('authToken')\r\n            }\r\n        })\r\n        .then((response)=>{\r\n            const user=response.data\r\n            dispatch(setUser(user))\r\n        })\r\n        .catch((err)=>{\r\n            alert(err)\r\n        })\r\n    }\r\n}\r\n\r\nexport const startRegister=(formData,redirect)=>{\r\n    return(dispatch)=>{\r\n       axios.post('http://localhost:3040/users/register',formData)\r\n       .then((response)=>{\r\n        if(response.data.hasOwnProperty('errors')){\r\n            alert(response.data.message)\r\n        }\r\n        else{\r\n            alert('you have succefully registered')\r\n            redirect()\r\n        }\r\n       })\r\n       .catch((err)=>{\r\n           console.log(err)\r\n       })\r\n    }\r\n}\r\n\r\nexport const startLogout=()=>{\r\n    return(dispatch)=>{\r\n        axios.delete('http://localhost:3033/users/logout',{\r\n            headers:{\r\n                'x-auth':localStorage.getItem('authToken')\r\n            }\r\n        })\r\n        .then((response)=>{\r\n            if(response.data.notice){\r\n                alert(response.data.notice)\r\n                localStorage.removeItem('authToken')\r\n                dispatch(setUser({}))\r\n                window.location.href=\"/\"\r\n            }\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}